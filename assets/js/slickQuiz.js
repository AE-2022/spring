!function(e){e.slickQuiz=function(n,t){var o=this,s="#"+e(n).attr("id"),a="questionCount",r="questions",c="question",d="answers",u="responses",f="correctResponse",l="correct",p="incorrect",h="checkAnswer",g="nextQuestion",m="backToQuestion",v="tryAgain",w="."+a,b="."+r,Q="."+c,k="."+d,x="."+u,z="."+f,q="."+l,y="."+p,R="."+h,A="."+g,I="."+m,T="."+v,M=s+" .quizName",O=s+" .quizArea",S=s+" .quizResults",C=s+" .quizResultsCopy",N=s+" .quizHeader",B=s+" .quizScore",U=s+" .quizLevel",D=e(s+" .startQuiz"),_=e(M),L=e(O),P=e(S),j=e(C),J=e(N),F=(e(B),e(U)),H="";t&&void 0!==t.disableNext&&(void 0===t.preventUnanswered&&(t.preventUnanswered=t.disableNext),H+="The 'disableNext' option has been deprecated, please use 'preventUnanswered' in it's place.\n\n"),""!==H&&("undefined"!=typeof console?console.warn(H):alert(H)),o.config=e.extend({checkAnswerText:"Check the answer",nextQuestionText:"Next &raquo;",backButtonText:"",tryAgainText:"",skipStartButton:!1,numberOfQuestions:null,randomSort:!1,randomSortQuestions:!1,randomSortAnswers:!1,preventUnanswered:!1,completionResponseMessaging:!1,disableResponseMessaging:!1},t);var Y=o.config.json?o.config.json:"undefined"!=typeof quizJSON?quizJSON:null,E=o.config.randomSort||o.config.randomSortQuestions?Y.questions.sort(function(){return Math.round(Math.random())-.5}):Y.questions,G=E.length;o.config.numberOfQuestions&&G>=o.config.numberOfQuestions&&(E=E.slice(0,o.config.numberOfQuestions),G=E.length),o.method={setupQuiz:function(){_.hide().html(Y.info.name).fadeIn(1e3),J.hide().prepend(Y.info.main).fadeIn(1e3),j.append(Y.info.results),o.config.tryAgainText&&""!==o.config.tryAgainText&&j.before('<a class="button '+v+'" href="#">'+o.config.tryAgainText+"</a>");var n=e('<ol class="'+r+'"></ol>'),t=1;for(i in E)if(E.hasOwnProperty(i)){var s=E[i],f=e('<li class="'+c+'" id="question'+(t-1)+'"></li>');f.append('<div class="'+a+'">Question <span class="current">'+t+'</span> of <span class="total">'+G+"</span></div>"),f.append("<h3>"+t+". "+s.q+"</h3>");var w=0;for(i in s.a)s.a.hasOwnProperty(i)&&(answer=s.a[i],answer.correct&&w++);var b=e('<ul class="'+d+'"></ul>'),Q=o.config.randomSort||o.config.randomSortAnswers?s.a.sort(function(){return Math.round(Math.random())-.5}):s.a,k=!!s.select_any&&s.select_any,x="question"+(t-1),z=w>1&&!k?"checkbox":"radio";for(i in Q)if(Q.hasOwnProperty(i)){answer=Q[i],optionId=x+"_"+i.toString();var q='<input id="'+optionId+'" name="'+x+'" type="'+z+'" />',y='<label for="'+optionId+'">'+answer.option+"</label>",R=e("<li></li>").append(q).append(y);b.append(R)}if(f.append(b),!o.config.disableResponseMessaging){var A=e('<ul class="'+u+'"></ul>');A.append('<li class="'+l+'">'+s.correct+"</li>"),A.append('<li class="'+p+'">'+s.incorrect+"</li>"),f.append(A)}o.config.backButtonText&&""!==o.config.backButtonText&&f.append('<a href="#" class="button '+m+'">'+o.config.backButtonText+"</a>"),o.config.disableResponseMessaging||o.config.completionResponseMessaging?f.append('<a href="#" class="button '+g+" "+h+'">'+o.config.nextQuestionText+"</a>"):(f.append('<a href="#" class="button '+g+'">'+o.config.nextQuestionText+"</a>"),f.append('<a href="#" class="button '+h+'">'+o.config.checkAnswerText+"</a>")),n.append(f),t++}L.append(n),o.config.skipStartButton||0==D.length?(D.hide(),o.method.startQuiz(this)):D.fadeIn(500)},startQuiz:function(){function n(){var n=e(s+" "+b+" li").first();n.length&&n.fadeIn(500)}o.config.skipStartButton||0==D.length?n():D.fadeOut(300,function(){n()})},resetQuiz:function(n){P.fadeOut(300,function(){e(s+" input").prop("checked",!1).prop("disabled",!1),F.attr("class","quizLevel"),e(s+" "+z).removeClass(f),e(s+" "+Q+","+s+" "+x+","+s+" "+q+","+s+" "+y+","+s+" "+A+","+s+" "+I).hide(),e(s+" "+w+","+s+" "+k+","+s+" "+R).show(),L.append(e(s+" "+b)).show(),o.method.startQuiz(P)})},checkAnswer:function(n){var t=e(e(n).parents(Q)[0]),s=t.find("input:checked"),a=parseInt(t.attr("id").replace(/(question)/,""),10),r=E[a].a,c=!!E[a].select_any&&E[a].select_any,d=[];for(i in r)if(r.hasOwnProperty(i)){var u=r[i];u.correct&&d.push(e("<div />").html(u.option).text())}var l=[];if(s.each(function(){var n=e(this).next("label").text();l.push(n)}),o.config.preventUnanswered&&0===l.length)return alert("You must select at least one answer."),!1;var p=o.method.compareAnswers(d,l,c);p&&t.addClass(f),o.config.disableResponseMessaging||(o.config.completionResponseMessaging||(t.find(k).hide(),t.find(x).show(),e(n).hide(),t.find(A).fadeIn(300),t.find(I).fadeIn(300)),t.find(p?q:y).fadeIn(300))},nextQuestion:function(n){var t=e(e(n).parents(Q)[0]),i=t.next(Q),s=t.find("input:checked");if(o.config.preventUnanswered&&0===s.length)return!1;i.length?t.fadeOut(300,function(){i.find(I).show().end().fadeIn(500)}):o.method.completeQuiz()},backToQuestion:function(n){var t=e(e(n).parents(Q)[0]),i=t.find(k);if("block"===i.css("display")){var s=t.prev(Q);t.fadeOut(300,function(){s.removeClass(f),s.find(x+", "+x+" li").hide(),s.find(k).show(),s.find(R).show(),o.config.disableResponseMessaging||o.config.completionResponseMessaging||s.find(A).hide(),"question0"!=s.attr("id")?s.find(I).show():s.find(I).hide(),s.fadeIn(500)})}else t.find(x).fadeOut(300,function(){t.removeClass(f),t.find(x+" li").hide(),i.fadeIn(500),t.find(R).fadeIn(500),t.find(A).hide(),"question0"!=t.attr("id")?t.find(I).show():t.find(I).hide()})},completeQuiz:function(){var n=[Y.info.level1,Y.info.level2,Y.info.level3,Y.info.level4,Y.info.level5],t=e(s+" "+z).length,i=o.method.calculateLevel(t),a=e.isNumeric(i)?n[i]:"";e(B+" span").html(t+" / "+G),e(U+" span").html(a),e(U).addClass("level"+i),L.fadeOut(300,function(){o.config.completionResponseMessaging&&!o.config.disableResponseMessaging?(e(s+" input").prop("disabled",!0),e(s+" .button:not("+T+"), "+s+" "+w).hide(),e(s+" "+Q+", "+s+" "+x).show(),P.append(e(s+" "+b)).fadeIn(500)):P.fadeIn(500)})},compareAnswers:function(n,t,i){return i?e.inArray(t[0],n)>-1:0===e(n).not(t).length&&0===e(t).not(n).length},calculateLevel:function(e){var n=(e/G).toFixed(2),t=null;return o.method.inRange(0,.2,n)?t=4:o.method.inRange(.21,.4,n)?t=3:o.method.inRange(.41,.6,n)?t=2:o.method.inRange(.61,.8,n)?t=1:o.method.inRange(.81,1,n)&&(t=0),t},inRange:function(e,n,t){return t>=e&&t<=n}},o.init=function(){o.method.setupQuiz(),D.on("click",function(e){e.preventDefault(),o.method.startQuiz()}),e(s+" "+T).on("click",function(e){e.preventDefault(),o.method.resetQuiz(this)}),e(s+" "+R).on("click",function(e){e.preventDefault(),o.method.checkAnswer(this)}),e(s+" "+I).on("click",function(e){e.preventDefault(),o.method.backToQuestion(this)}),e(s+" "+A).on("click",function(e){e.preventDefault(),o.method.nextQuestion(this)})},o.init()},e.fn.slickQuiz=function(n){return this.each(function(){if(void 0===e(this).data("slickQuiz")){var t=new e.slickQuiz(this,n);e(this).data("slickQuiz",t)}})}}(jQuery);